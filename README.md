# C++

class 和 struct 具有统一的规则集，class 能干的，struct 也能干。但 struct 一般用于封装数据结构，成为聚合类型，class 用于封装更为复杂的逻辑和行为。

## 聚合与非聚合类型

这是 C++中与类/结构体初始化相关的核心概念，其区别直接影响对象的初始化方式。

### 聚合类型的定义与特性

- ​定义 ​​：满足以下所有条件的类或结构体（含数组）：
  - 无用户声明的构造函数（包括 explicit 或继承构造函数）
  - 所有非静态成员均为 public
  - 无虚函数或虚基类
  - 无非公有基类（C++17 起允许公有继承基类）
  - 无成员使用大括号或等号初始化（C++11 限制，C++14 起取消）
- 初始化：
  - 支持大括号列表初始化，按成员声明顺序赋值：

    ```c++
    struct Point { int x; int y; };
    Point p = {1, 2};
    ```

  - C++ 20起，支持指派初始化，指定成员名赋值：

    ```c++
    Point p {.x = 1, .y = 2};
    ```

### 非聚合类型的定义与特性

违反任一条聚合类型定义即为非聚合类型

- 初始化：
  - 必须通过构造函数进行初始化
  - 具有匹配的构造函数才能使用大括号列表初始化
